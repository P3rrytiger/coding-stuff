<!DOCTYPE html>
<html>
  <head>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cabin:ital,wght@0,400..700;1,400..700&display=swap" rel="stylesheet">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <title>hi</title>
    <link rel="stylesheet" type="text/css" href="index.css">
  </head>
  <body>
    <div id="hello" style="left:10px;" class="move"><h1 id="woooo">Hello</h1></div>
    <div id="world" class="move"><h1>World</h1></div>
    <div class="move"><h1>This</h1></div>
    <div class="move"><h1>Is</h1></div>
    <div class="move"><h1>A</h1></div>
    <div class="move"><h1>Web</h1></div>
    <div class="move"><h1>Site</h1></div>
    <div class="move"><h1>This</h1></div>
    <div class="move"><h1>Is</h1></div>
    <div class="move"><h1>A</h1></div>
    <div class="move"><h1>Web</h1></div>
    <div class="move"><h1>Site</h1></div>
    <ul>
      <li><a href="index.html" class="move">
        index
      </a></li>
      <li><a href="table.html" class="move">
        tables
      </a></li>
      <li><a href="list.html" class="move">
        list
      </a></li>
    </ul>
    
    <script>
    
    let part = document.getElementsByClassName("move");
    let parts = [];
    
    for(i=0; i<part.length;i++){
      t=(Math.random()*2) - 1;
      t2 = ((Math.floor(Math.random()*2)*2) - 1);
      x=Math.floor(Math.random()*(window.innerWidth-100));
      y=Math.floor(Math.random()*(window.innerHeight-100));
      
      for(n=0; n<parts.length;n++){
        s = parts[n];
        while(Math.abs(s.x-x)<110&&Math.abs(s.y-y)<110){
          x=Math.floor(Math.random()*(window.innerWidth-100));
          y=Math.floor(Math.random()*(window.innerHeight-100));
        }
        
      }
	    parts[i] = {
	     	id:part[i],
	      x:x,
	      y:y,
	      vx:t,
	      vy:(1 - Math.abs(t)) * t2,
      	px:x,
      	py:y
      };
    }
    
    setInterval(loop, 1);
    
    function loop(){
      for(i=0; i<parts.length; i++){
      	n = parts[i];
      	colisions(n,i);
      	
        n.x += n.vx;
        n.y += n.vy;
        
        if(n.x<=0){
          n.vx = Math.abs(n.vx);
          n.x += n.vx;
        } else if(n.x>=(window.innerWidth-100)){
          n.vx = Math.abs(n.vx)*(-1);
          n.x += n.vx;
        }
        if(n.y<=0){
          n.vy = Math.abs(n.vy);
          n.y += n.vy;
        } else if(n.y>=(window.innerHeight-100)){
          n.vy = Math.abs(n.vy)*(-1);
          n.y += n.vy;
        }
        
        
        
        n.id.style.left = `${n.x}px`;
        n.id.style.top = `${n.y}px`;
      }
      
      for(i=0; i<parts.length; i++){
      	n = parts[i];
      	n.px = n.x;
      	n.py = n.y;
      }
    }
    
    function colisions(a,c){
    	for(e=0; e<parts.length; e++){
    		o = parts[e];
    		if(c!=e){
    			if((Math.abs(a.px - o.px)<100) && (Math.abs(a.py - o.py)<100)){
    				dx = Math.abs(o.px-a.px);
    				dy = Math.abs(o.py-a.py);
    				
    				if(dx>dy){
    				  if(polorize(o.px-a.px)==polorize(a.vx)){
    				    a.vx*=(-1);
    				  }
    				} else{
    				  if(polorize(o.py-a.py)==polorize(a.vy)){
    				    a.vy*=(-1);
    				  }
    				}
    				//a.id.innerHTML = "lol";
    			}
    		}
    	}
    }
    
    function polorize(b){
    	return (Math.abs(b)/b);
    }
      /*let x_pos = 1;
      let y = ""
      let pol = 1;
      
      setInterval(loop, 1);
      
      function loop(){
        x_pos = document.getElementById("hello").style.left;
        x = x_pos.slice(0,(x_pos.length - 2));
        //document.getElementById("woooo").innerHTML = x_pos;
        x = toInt(x);
        x += pol;
        y = `${x}px`;
        document.getElementById("hello").style.left = y;
        
        if(x > 2000){
          pol = -1;
        } else if(x < 10){
          pol = 1;
        }
      }*/
      
      function toInt(n){
        let i = 0;
        for(i = 0;(i.toString() != n); i++){
          
        }
        return i;
      }
    </script>
  </body>
</html>
